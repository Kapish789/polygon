<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kapisch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Lato', 'Montserrat', sans-serif;
            background-color: #000;
            color: black;
        }
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }
        .content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            z-index: 1;
            padding-top: 250px;
            transition: opacity 0.8s;
        }
        /* Neon Button 76 Styles */
        .btn-76,
        .btn-76 *,
        .btn-76 :after,
        .btn-76 :before,
        .btn-76:after,
        .btn-76:before {
          border: 0 solid;
          box-sizing: border-box;
        }
        .btn-76 {
          -webkit-tap-highlight-color: transparent;
          -webkit-appearance: button;
          background-color: #000;
          background-image: none;
          color: #fff;
          cursor: pointer;
          font-family: 'Montserrat', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
            Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif;
          font-size: 100%;
          line-height: 1.5;
          margin: 0;
          -webkit-mask-image: -webkit-radial-gradient(#000, #fff);
          padding: 0;
        }
        .btn-76:disabled {
          cursor: default;
        }
        .btn-76:-moz-focusring {
          outline: auto;
        }
        .btn-76 svg {
          display: block;
          vertical-align: middle;
        }
        .btn-76 [hidden] {
          display: none;
        }
        .btn-76 {
          --neon: #0ea5e9;
          box-sizing: border-box;
          display: block;
          font-weight: 900;
          -webkit-mask-image: none;
          outline: 4px solid #fff;
          outline-offset: -4px;
          overflow: hidden;
          padding: 1.2rem 3rem;
          border-radius: 1.5rem; /* Add this line for rounded corners */
          position: relative;
          text-transform: uppercase;
          transition: 0.2s linear 0.1s;
        }
        .btn-76:hover {
          background: var(--neon);
          box-shadow: 0 0 5px var(--neon), 0 0 25px var(--neon), 0 0 50px var(--neon),
            0 0 100px var(--neon);
          color: #fff;
          outline-color: transparent;
          transition: 0.2s linear 0.6s;
        }
        .btn-76 span {
          display: block;
          inset: 0;
          position: absolute;
        }
        .btn-76 .top {
          border-top: 4px solid var(--neon);
          opacity: 0;
          transform: translateX(calc(-100% + var(--progress, 0%)));
          transition: none;
        }
        .btn-76:hover .top {
          --progress: 100%;
          opacity: 1;
          transition: transform 0.2s linear;
        }
        .btn-76 .right {
          border-right: 4px solid var(--neon);
          opacity: 0;
          transform: translateY(calc(-100% + var(--progress, 0%)));
          transition: none;
        }
        .btn-76:hover .right {
          --progress: 100%;
          opacity: 1;
          transition: transform 0.2s linear 0.2s;
        }
        .btn-76 .bottom {
          border-bottom: 4px solid var(--neon);
          opacity: 0;
          transform: translateX(calc(100% - var(--progress, 0%)));
          transition: none;
        }
        .btn-76:hover .bottom {
          --progress: 100%;
          opacity: 1;
          transition: transform 0.2s linear 0.4s;
        }
        .btn-76 .left {
          border-left: 4px solid var(--neon);
          opacity: 0;
          transform: translateY(calc(100% - var(--progress, 0%)));
          transition: none;
        }
        .btn-76:hover .left {
          --progress: 100%;
          opacity: 1;
          transition: transform 0.2s linear 0.6s;
        }

        /* New Portfolio Tiles Section */
        .tiles-section {
            width: 100vw;
            min-height: 100vh;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            position: absolute;
            top: 0; left: 0;
            z-index: 10;
            background: transparent;
        }
        .tiles-section.active {
            display: flex;
            animation: fadeIn 1s;
        }
        @keyframes fadeIn {
            from { opacity: 0;}
            to { opacity: 1;}
        }
        .tiles-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 2.5rem;
            justify-content: center;
            align-items: center;
            margin-top: 40px;
        }
        .portfolio-tile {
            width: 320px;
            height: 320px;
            background: #fff;
            color: #222;
            border-radius: 2.5rem;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            text-decoration: none;
            position: relative;
            overflow: hidden;
            margin: 0 10px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            transition: 
                transform 0.7s cubic-bezier(.77,0,.18,1.01),
                opacity 0.5s cubic-bezier(.77,0,.18,1.01),
                box-shadow 0.3s;
            opacity: 0;
            transform: translateY(200px) scale(0.7);
            will-change: transform, opacity;
        }
        .portfolio-tile.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        .portfolio-tile .tile-bg {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
            background-size: cover;
            background-position: center;
            filter: brightness(0.7) blur(0.5px);
            transition: filter 0.4s;
        }
        .portfolio-tile:hover .tile-bg {
            filter: brightness(0.9) blur(0px);
        }
        .portfolio-tile .tile-content {
            position: relative;
            z-index: 2;
            padding: 2.5rem 2rem 2rem 2rem;
            color: #fff;
            text-shadow: 0 2px 8px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .portfolio-tile .tile-title {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }
        .portfolio-tile .tile-desc {
            font-size: 1.1rem;
            font-weight: 400;
            margin-bottom: 0.5rem;
        }
        .portfolio-tile .tile-emoji {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .portfolio-tile:hover {
            box-shadow: 0 16px 48px 0 #0ea5e9;
            transform: scale(1.04) translateY(-10px);
        }
        @media (max-width: 900px) {
            .tiles-grid {
                flex-direction: column;
                gap: 1.5rem;
            }
            .portfolio-tile {
                width: 90vw;
                max-width: 350px;
                height: 180px;
                font-size: 1.1rem;
            }
            .portfolio-tile .tile-content {
                padding: 1.2rem 1rem 1rem 1rem;
            }
            .portfolio-tile .tile-title {
                font-size: 1.2rem;
            }
            .portfolio-tile .tile-emoji {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body class="bg-black">
    <canvas id="bg-canvas"></canvas>
    <div class="content-container" id="main-content">
        <h1 id="welcome-title" class="text-3xl sm:text-4xl md:text-5xl font-black text-white tracking-wider leading-tight" style="font-family: 'Montserrat', sans-serif;">
            Kapisch
        </h1>
        <button id="fly-btn" class="btn-76 mt-10">
            Enter the Galaxy
            <span class="top"></span>
            <span class="right"></span>
            <span class="bottom"></span>
            <span class="left"></span>
        </button>
    </div>
    <!-- New Tiles Section -->
    <div class="tiles-section" id="tiles-section">
        <div class="tiles-grid">
            <a class="portfolio-tile" id="tile-1" href="https://lifehacksgermany.com" target="_blank">
                <div class="tile-bg" style="background-image:url('https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=920,h=872,fit=crop/AQEpZaobklTjBqqM/wepik-untitled-project-20240812142105urxy-Yley4gewJlH0byN9.png');"></div>
                <div class="tile-content">
                    <div class="tile-emoji">üåê</div>
                    <div class="tile-title">Life Hacks Germany</div>
                    <div class="tile-desc">Tips for efficient living in Germany</div>
                </div>
            </a>
            <a class="portfolio-tile" id="tile-2" href="https://tankalert.de" target="_blank">
                <div class="tile-bg" style="background-image:url('https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=928,h=624,fit=crop/AQEpZaobklTjBqqM/tank-alert-YX4apDN7vRT5yp47.png');"></div>
                <div class="tile-content">
                    <div class="tile-emoji">üõí</div>
                    <div class="tile-title">Tank Alert</div>
                    <div class="tile-desc">Fuel Price Tracking in Germany</div>
                </div>
            </a>
            <a class="portfolio-tile" id="tile-3" href="https://techdealpro.com" target="_blank">
                <div class="tile-bg" style="background-image:url('https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=910,h=412,fit=crop/AQEpZaobklTjBqqM/tech-deal-pro-1-dWxbL39q8ZUarER5.png');"></div>
                <div class="tile-content">
                    <div class="tile-emoji">üì∏</div>
                    <div class="tile-title">Tech Deal Pro</div>
                    <div class="tile-desc">E-Commerce</div>
                </div>
            </a>
            <a class="portfolio-tile" id="tile-4" href="https://yourwebsite4.com" target="_blank">
                <div class="tile-bg" style="background-image:url('https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80');"></div>
                <div class="tile-content">
                    <div class="tile-emoji">üíº</div>
                    <div class="tile-title">Website 4</div>
                    <div class="tile-desc">Business Landing Page</div>
                </div>
            </a>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, lowPolyMesh, stars, raycaster, mouse;
        let clock = new THREE.Clock();

        // Flying effect variables
        let isFlying = false;
        let flyStartTime = 0;
        const flyDuration = 3.5; // seconds
        let cameraStart = { y: 5, z: 25 };
        let cameraEnd = { y: 30, z: -80 }; // Move forward and up

        let hasTransitioned = false;
        let tilesAnimated = false;

        function initThreeJS() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);

            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.set(0, cameraStart.y, cameraStart.z);
            camera.lookAt(0, 0, 0);

            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

            // Starfield
            const starVertices = [];
            const numStars = 5000;
            const starSpread = 1000;

            for (let i = 0; i < numStars; i++) {
                const x = THREE.MathUtils.randFloatSpread(starSpread * 2);
                const y = THREE.MathUtils.randFloat(10, starSpread);
                const z = THREE.MathUtils.randFloatSpread(starSpread * 2);
                if (Math.sqrt(x*x + y*y + z*z) > 100) {
                    starVertices.push(x, y, z);
                }
            }

            const starGeometry = new THREE.BufferGeometry();
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));

            const starMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 3.5,
                sizeAttenuation: true,
                transparent: true,
                opacity: 2.8,
                map: new THREE.TextureLoader().load('https://threejs.org/examples/textures/sprites/spark1.png'),
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });

            stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);

            // High-definition Low Poly Plane Geometry
            const planeWidth = 150;
            const planeHeight = 150;
            const widthSegments = 200;
            const heightSegments = 200;

            const geometry = new THREE.PlaneGeometry(planeWidth, planeHeight, widthSegments, heightSegments);
            const vertices = geometry.attributes.position;
            const colors = [];
            const originalZ = [];
            const baseColors = [];

            const blueColors = [
                new THREE.Color(0x0a1a2f),
                new THREE.Color(0x102a4c),
                new THREE.Color(0x1a3a6a),
                new THREE.Color(0x26508e),
                new THREE.Color(0x3a6aa0)
            ];

            for (let i = 0; i < vertices.count; i++) {
                const z = Math.random() * 2.5 - 1.25;
                vertices.setZ(i, z);
                originalZ.push(z);

                const zValue = vertices.getZ(i);
                let colorIndex = 0;
                if (zValue > 0.8) colorIndex = 4;
                else if (zValue > 0.3) colorIndex = 3;
                else if (zValue > -0.3) colorIndex = 2;
                else if (zValue > -0.8) colorIndex = 1;

                const color = blueColors[colorIndex];
                colors.push(color.r, color.g, color.b);
                baseColors.push(color.r, color.g, color.b);
            }
            vertices.needsUpdate = true;
            geometry.computeVertexNormals();

            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            geometry.setAttribute('baseColor', new THREE.Float32BufferAttribute([...colors], 3));
            geometry.userData.originalZ = originalZ;

            const material = new THREE.MeshStandardMaterial({
                vertexColors: true,
                side: THREE.DoubleSide,
                flatShading: true
            });

            lowPolyMesh = new THREE.Mesh(geometry, material);
            lowPolyMesh.rotation.x = -Math.PI / 2.2;
            lowPolyMesh.position.y = -10;
            scene.add(lowPolyMesh);

            // Add Lighting
            const ambientLight = new THREE.AmbientLight(0x404040, 1.5);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(50, 50, 50);
            scene.add(directionalLight);

            // Raycaster for mouse interaction
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            window.addEventListener('mousemove', onMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);
            animate();
        }

        function onMouseMove(event) {
            if (hasTransitioned) return; // Disable highlight after transition
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObject(lowPolyMesh);

            const colors = lowPolyMesh.geometry.attributes.color;
            const baseColors = lowPolyMesh.geometry.attributes.baseColor;

            // Reset all colors to base
            for (let i = 0; i < colors.count; i++) {
                colors.setXYZ(i, baseColors.getX(i), baseColors.getY(i), baseColors.getZ(i));
            }

            if (intersects.length > 0) {
                const face = intersects[0].face;
                const vertices = [face.a, face.b, face.c];

                // Highlight the intersected face
                vertices.forEach(vertexIndex => {
                    const baseColor = new THREE.Color(
                        baseColors.getX(vertexIndex),
                        baseColors.getY(vertexIndex),
                        baseColors.getZ(vertexIndex)
                    );
                    const highlightedColor = baseColor.clone().lerp(new THREE.Color(0xffffff), 0.5);
                    colors.setXYZ(vertexIndex, highlightedColor.r, highlightedColor.g, highlightedColor.b);
                });

                // Highlight nearby vertices
                const radius = 2;
                for (let i = 0; i < colors.count; i++) {
                    const vertexPosition = new THREE.Vector3(
                        lowPolyMesh.geometry.attributes.position.getX(i),
                        lowPolyMesh.geometry.attributes.position.getY(i),
                        lowPolyMesh.geometry.attributes.position.getZ(i)
                    );

                    const intersectedPosition = intersects[0].point;
                    if (vertexPosition.distanceTo(intersectedPosition) < radius) {
                        const baseColor = new THREE.Color(
                            baseColors.getX(i),
                            baseColors.getY(i),
                            baseColors.getZ(i)
                        );
                        const highlightedColor = baseColor.clone().lerp(new THREE.Color(0xffffff), 0.3);
                        colors.setXYZ(i, highlightedColor.r, highlightedColor.g, highlightedColor.b);
                    }
                }
            }
            colors.needsUpdate = true;
        }

        function easeInOutCubic(t) {
            return t < 0.5
                ? 4 * t * t * t
                : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }

        // Animate tiles flying in from below
        function animateTilesIn() {
            const tiles = [
                document.getElementById('tile-1'),
                document.getElementById('tile-2'),
                document.getElementById('tile-3'),
                document.getElementById('tile-4')
            ];
            tiles.forEach((tile, i) => {
                tile.classList.remove('visible');
                tile.style.transitionDelay = '0s';
                setTimeout(() => {
                    tile.style.transitionDelay = (i * 0.09) + 's';
                    tile.classList.add('visible');
                }, 60 + i * 90); // Fast, but staggered
            });
        }

        function animate() {
            requestAnimationFrame(animate);

            const elapsedTime = clock.getElapsedTime();

            // Camera flying animation
            if (isFlying) {
                let t = (performance.now() - flyStartTime) / 1000 / flyDuration;
                t = Math.min(t, 1);
                t = easeInOutCubic(t);
                camera.position.z = cameraStart.z + (cameraEnd.z - cameraStart.z) * t;
                camera.position.y = cameraStart.y + (cameraEnd.y - cameraStart.y) * t;
                camera.lookAt(0, 0, 0);

                // When transition is done, show tiles and hide main content
                if (t >= 1 && !hasTransitioned) {
                    hasTransitioned = true;
                    document.getElementById('main-content').style.opacity = 0;
                    setTimeout(() => {
                        document.getElementById('main-content').style.display = 'none';
                        document.getElementById('tiles-section').classList.add('active');
                        // Animate tiles in
                        if (!tilesAnimated) {
                            animateTilesIn();
                            tilesAnimated = true;
                        }
                    }, 600);
                }
            }

            if (lowPolyMesh) {
                const vertices = lowPolyMesh.geometry.attributes.position;
                const originalZ = lowPolyMesh.geometry.userData.originalZ;

                // Fluid, harmonious wave motion
                for (let i = 0; i < vertices.count; i++) {
                    const x = vertices.getX(i);
                    const y = vertices.getY(i);
                    const baseZ = originalZ[i];

                    const wave =
                        Math.sin((x + elapsedTime * 2) * 0.18) * 0.6 +
                        Math.cos((y + elapsedTime * 2) * 0.18) * 0.6 +
                        Math.sin((x + y + elapsedTime) * 0.12) * 0.4;

                    vertices.setZ(i, baseZ + wave);
                }
                vertices.needsUpdate = true;
            }

            if (stars) {
                stars.rotation.y += 0.0001;
                stars.material.opacity = 0.8 + Math.sin(elapsedTime * 2) * 0.2;
            }

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        }

        // Button click handler
        document.addEventListener('DOMContentLoaded', () => {
            const flyBtn = document.getElementById('fly-btn');
            flyBtn.addEventListener('click', () => {
                isFlying = true;
                flyStartTime = performance.now();
                flyBtn.style.opacity = 0;
                document.getElementById('welcome-title').style.opacity = 0;
                setTimeout(() => flyBtn.style.display = 'none', 800);
            });
        });

        initThreeJS();
    </script>
</body>
</html>