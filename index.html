<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kapisch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black">
    <canvas id="bg-canvas"></canvas>

    <div class="content-container" id="main-content">
        <h1 id="welcome-title" class="text-5xl sm:text-5xl md:text-6xl font-black text-white tracking-wider leading-tight" style="font-family: 'Montserrat', sans-serif;">
            Kapisch
        </h1>
        <button id="fly-btn" class="btn-76 mt-10">
            Enter the Galaxy
            <span class="top"></span>
            <span class="right"></span>
            <span class="bottom"></span>
            <span class="left"></span>
        </button>
    </div>

    <div class="tiles-section" id="tiles-section">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 lg:gap-10 w-full max-w-6xl mx-auto px-4">
            <a href="https://lifehacksgermany.com" target="_blank" class="futuristic-card-link" id="tile-1">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                        <img src="https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=920,h=872,fit=crop/AQEpZaobklTjBqqM/wepik-untitled-project-20240812142105urxy-Yley4gewJlH0byN9.png"
                             alt="Life Hacks Germany Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Life+Hacks+DE';">
                    </div>
                </div>
                <div class="futuristic-card-title">Life Hacks Germany</div>
            </a>
            <a href="https://tankalert.de" target="_blank" class="futuristic-card-link" id="tile-2">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                         <img src="https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=928,h=624,fit=crop/AQEpZaobklTjBqqM/tank-alert-YX4apDN7vRT5yp47.png"
                              alt="Tank Alert Preview"
                              onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Tank+Alert';">
                    </div>
                </div>
                 <div class="futuristic-card-title">Tank Alert</div>
            </a>
            <a href="https://techdealpro.com" target="_blank" class="futuristic-card-link" id="tile-3">
                <div class="futuristic-card">
                     <div class="futuristic-card-image">
                         <img src="https://assets.zyrosite.com/cdn-cgi/image/format=auto,w=910,h=412,fit=crop/AQEpZaobklTjBqqM/tech-deal-pro-1-dWxbL39q8ZUarER5.png"
                              alt="Tech Deal Pro Preview"
                              onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=TechDealPro';">
                     </div>
                 </div>
                <div class="futuristic-card-title">Tech Deal Pro</div>
            </a>

            <a href="fun-projects.html" class="futuristic-card-link" id="tile-4">
                <div class="futuristic-card fun-project-card"> <div class="futuristic-card-content-placeholder">
                         <span class="text-4xl font-bold text-white" style="font-family: 'Montserrat', sans-serif;">Fun Projects</span>
                     </div>
                 </div>
                <div class="futuristic-card-title">Explore More</div>
            </a>
        </div>
    </div>

    <button id="contact-btn" class="fixed z-50 bottom-6 right-6 hidden group">
        <div class="futuristic-card p-0 m-0 w-16 h-16 flex items-center justify-center shadow-lg transition-transform group-hover:scale-105" style="background: linear-gradient(135deg, #111827 60%, #667eea 100%); border-radius: 1.5rem;">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z" />
            </svg>
        </div>
        <span class="absolute right-20 bottom-1 bg-[#667eea] text-white px-4 py-1 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity text-sm font-semibold" style="font-family: 'Montserrat', sans-serif;">Contact me</span>
    </button>

    <div id="contact-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 hidden">
        <div class="bg-[#111827] rounded-2xl shadow-2xl p-8 w-full max-w-md relative" style="font-family: 'Inter', sans-serif;">
            <button id="close-modal" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold text-white mb-4" style="font-family: 'Montserrat', sans-serif;">Contact Me</h2>
            <form id="contact-form" class="flex flex-col gap-4" action="https://formspree.io/f/xpwpvdln" method="POST">
                <input type="text" name="name" placeholder="Your Name" required class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]">
                <input type="email" name="email" placeholder="Your Email" required class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]">
                <textarea name="message" placeholder="Your Message" required rows="4" class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]"></textarea>
                <button type="submit" class="futuristic-card bg-[#667eea] text-white font-bold py-2 rounded-lg hover:bg-[#5561c9] transition-colors">Send</button>
            </form>
            <div id="contact-success" class="hidden text-green-400 mt-4 text-center">Thank you! Your message has been sent.</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="script.js" defer></script>
    <script>
    // Show/hide contact button only on tiles-section
    document.addEventListener('DOMContentLoaded', function() {
        const tilesSection = document.getElementById('tiles-section');
        const contactBtn = document.getElementById('contact-btn');
        const mainContent = document.getElementById('main-content');
        const flyBtn = document.getElementById('fly-btn');

        // Function to show button - now checks if tiles are visible
        function checkAndShowContactBtn() {
            const tilesSection = document.getElementById('tiles-section');
            if (tilesSection && tilesSection.classList.contains('active')) {
                contactBtn.classList.remove('hidden');
            } else {
                 contactBtn.classList.add('hidden');
            }
        }

        // Initial check might be needed if tiles start visible
        // checkAndShowContactBtn();

        // Show button when fly animation completes (using hasTransitioned flag from script.js)
        // We'll rely on script.js to manage this timing more accurately.
        // The updated script.js will handle showing the button.


        // Modal logic (remains the same)
        const contactModal = document.getElementById('contact-modal');
        const closeModal = document.getElementById('close-modal');
        const contactForm = document.getElementById('contact-form');
        const contactSuccess = document.getElementById('contact-success');

        if (contactBtn && contactModal && closeModal) {
            contactBtn.addEventListener('click', () => {
                contactModal.classList.remove('hidden');
            });
            closeModal.addEventListener('click', () => {
                contactModal.classList.add('hidden');
            });
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) contactModal.classList.add('hidden');
            });
        }

        // Form submit logic (remains the same)
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                fetch(contactForm.action, {
                    method: 'POST',
                    body: new FormData(contactForm),
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        contactForm.reset(); // Clear the form
                        contactForm.style.display = 'none'; // Hide form
                        contactSuccess.classList.remove('hidden'); // Show success
                        // Optionally hide modal after a delay
                        setTimeout(() => {
                            contactModal.classList.add('hidden');
                            // Reset for next time
                            contactForm.style.display = 'flex';
                            contactSuccess.classList.add('hidden');
                        }, 3000);
                    } else {
                         response.json().then(data => {
                           if (Object.hasOwn(data, 'errors')) {
                             alert(data["errors"].map(error => error["message"]).join(", "));
                           } else {
                             alert('There was a problem sending your message. Please try again.');
                           }
                         })
                    }
                }).catch(() => {
                    alert('There was a problem sending your message. Check your connection and try again.');
                });
            });
        }
    });
    </script>
</body>
</html>